syntax = "proto3";
package leishmaniapp.cloud;

option java_package = "com.leishmaniapp.protobuf.analysis";
option java_multiple_files = true;
option csharp_namespace = "Leishmaniapp.Protobuf.Analysis";
option go_package = "leishmaniapp/protobuf;proto";

import "model.proto";
import "types.proto";

service AnalysisService {
    /// Start a streaming channel for analysis
    rpc StartAnalysis(stream AnalysisRequest) returns (stream AnalysisResponse);
}

message AnalysisRequest {
    model.ImageMetadata metadata = 1;
    types.ImageBytes image = 2;
}

message AnalysisResponse {
    model.ImageMetadata metadata = 1;
    map<string, types.ListOfCoordinates> results = 2;
}